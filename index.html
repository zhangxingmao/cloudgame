<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C49NH6D1H6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-C49NH6D1H6');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="images/game-icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.svg" type="image/svg+xml">
    <meta name="theme-color" content="#007AFF">
    <title>CloudGame - Play Free Online Games Instantly in Your Browser | No Downloads</title>
    <meta name="description" content="CloudGame offers free online games you can play instantly in your browser. No downloads required. Play action, puzzle, sports, shooter, and anime games with cloud gaming technology. Start playing now!">
    <meta name="keywords" content="cloudgame, cloud gaming, online games, browser games, free games, instant play games, no download games">
    <link rel="canonical" href="https://cloudgame.info" />
    <meta name="author" content="CloudGame">
    <meta property="og:title" content="CloudGame - Play Free Online Games Instantly">
    <meta property="og:description" content="Play free online games instantly with CloudGame. No downloads, no waiting. Experience cloud gaming at its best.">
    <meta property="og:image" content="https://cloudgame.info/images/og-image.jpg">
    <meta property="og:url" content="https://cloudgame.info">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CloudGame - Free Online Games">
    <meta name="twitter:description" content="Play free online games instantly in your browser with CloudGame. No downloads required.">
    <meta name="robots" content="index, follow">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#007AFF', // Apple Blue
                        secondary: '#5AC8FA', // Apple Light Blue
                        dark: '#000000', // Pure Black
                        darker: '#1A1A1A', // Slightly lighter black
                        light: '#FFFFFF', // Pure White
                        accent: '#FF2D55', // Apple Pink/Red
                        anime: '#BF5AF2', // Brighter Purple for dark mode
                        action: '#32D74B', // Brighter Green for dark mode
                        puzzle: '#FF9F0A', // Brighter Orange for dark mode
                        sports: '#64D2FF', // Brighter Teal for dark mode
                        shooter: '#FF453A', // Brighter Red for dark mode
                        fighting: '#FF0000', // Red for fighting
                        racing: '#00FF00', // Green for racing
                        casual: '#8B5CF6', // Purple for casual
                        adventure: '#047857' // Green for adventure
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Apple-style smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Subtle transitions */
        .smooth-transition {
            transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        body {
            background-color: #000000;
            color: #FFFFFF;
        }
        
        /* Category Buttons Enhancement */
        .category-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .category-btn:hover, .category-btn.active {
            transform: translateY(-2px);
        }
        
        .category-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: currentColor;
            transform: scaleX(0);
            transform-origin: center;
            transition: transform 0.3s ease;
        }
        
        .category-btn.active::after {
            transform: scaleX(1);
        }
        
        .category-btn:hover::after {
            transform: scaleX(0.7);
        }
        
        /* View More Button Enhancement */
        #view-more-games-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 122, 255, 0.3);
        }
        
        #view-more-games-btn:hover {
            box-shadow: 0 8px 20px rgba(0, 122, 255, 0.5);
            transform: translateY(-3px);
        }
        
        #view-more-games-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        #view-more-games-btn:hover::before {
            left: 100%;
        }
        
        /* Loading indicator for View More Button */
        #view-more-games-btn.loading {
            background: linear-gradient(90deg, #007AFF, #5AC8FA, #007AFF);
            background-size: 200% 100%;
            animation: gradient 1.5s infinite;
            pointer-events: none;
        }
        
        /* Enhanced Game Card Styling */
        .game-card {
            transition: all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
            position: relative;
            overflow: hidden;
        }
        
        .game-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        
        .game-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: 0.5s;
        }
        
        .game-card:hover::after {
            left: 100%;
        }
        
        .game-card .aspect-video img {
            transition: all 0.5s;
        }
        
        .game-card:hover .aspect-video img {
            transform: scale(1.1);
        }
        
        /* Button styling */
        .game-card a[href], .game-card button, .game-card .btn, .game-card [class*="btn"] {
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            z-index: 1;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .game-card a[href]::before, .game-card button::before, .game-card .btn::before, .game-card [class*="btn"]::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            z-index: -1;
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.5s;
        }
        
        .game-card a[href]:hover::before, .game-card button:hover::before, .game-card .btn:hover::before, .game-card [class*="btn"]:hover::before {
            transform: scaleX(1);
            transform-origin: left;
        }
        
        /* Game Title highlight effect */
        .game-card h3 {
            transition: all 0.3s;
            display: inline-block;
        }
        
        .game-card:hover h3 {
            background: linear-gradient(90deg, var(--tw-gradient-from), var(--tw-gradient-to));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 100%;
            animation: gradient 2s linear infinite;
        }
        
        @keyframes gradient {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }
        
        /* Apply custom category colors for hover effects */
        .game-card[data-category="action"]:hover h3 {
            --tw-gradient-from: #32D74B;
            --tw-gradient-to: #4ADE80;
        }
        
        .game-card[data-category="shooter"]:hover h3 {
            --tw-gradient-from: #FF453A;
            --tw-gradient-to: #FF6B6B;
        }
        
        .game-card[data-category="puzzle"]:hover h3 {
            --tw-gradient-from: #FF9F0A;
            --tw-gradient-to: #FFBE4D;
        }
        
        .game-card[data-category="sports"]:hover h3 {
            --tw-gradient-from: #64D2FF;
            --tw-gradient-to: #96E2FF;
        }
        
        .game-card[data-category="fighting"]:hover h3 {
            --tw-gradient-from: #FF0000;
            --tw-gradient-to: #FF6666;
        }
        
        .game-card[data-category="racing"]:hover h3 {
            --tw-gradient-from: #00FF00;
            --tw-gradient-to: #66FF66;
        }
        
        .game-card[data-category="anime"]:hover h3 {
            --tw-gradient-from: #BF5AF2;
            --tw-gradient-to: #D289F7;
        }
        
        .game-card[data-category="casual"]:hover h3 {
            --tw-gradient-from: #8B5CF6;
            --tw-gradient-to: #A78BFA;
        }
        
        .game-card[data-category="adventure"]:hover h3 {
            --tw-gradient-from: #047857;
            --tw-gradient-to: #10B981;
        }
        
        /* Better image container */
        .game-card .aspect-video {
            position: relative;
            overflow: hidden;
            border-radius: 0.75rem 0.75rem 0 0;
        }
        
        /* Enhanced Play Button */
        .game-card a[href], .game-card button, .game-card .btn, .game-card [class*="btn"] {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .game-card a[href]:hover, .game-card button:hover, .game-card .btn:hover, .game-card [class*="btn"]:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }
    </style>
    <script>
        function playGame(gameUrl) {
            // Open the game URL in a new tab/window
            window.open(gameUrl, '_blank');
        }
    </script>
</head>
<body class="bg-dark font-sans text-light">
    <!-- Header -->
    <header class="fixed w-full bg-darker/90 backdrop-blur-md border-b border-white/10 z-50">
        <nav class="container mx-auto px-4 py-4 flex items-center justify-between">
            <a href="/" class="text-2xl font-bold text-primary">CloudGame</a>
            
            <!-- Primary Navigation -->
            <div class="hidden md:flex space-x-8">
                <a href="/#features" class="text-gray-600 hover:text-primary">Features</a>
                <a href="/#how-it-works" class="text-gray-600 hover:text-primary">How It Works</a>
                <a href="/#faq" class="text-gray-600 hover:text-primary">FAQ</a>
                <a href="games/popular.html" class="text-gray-600 hover:text-primary">Popular</a>
            </div>
            
            <button class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">Play Now</button>
            
            <!-- Mobile menu button -->
            <button class="md:hidden text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="pt-36 pb-24 bg-gradient-to-b from-darker to-dark">
        <div class="container mx-auto px-6">
            <div class="text-center max-w-4xl mx-auto">
                <h1 class="text-5xl md:text-6xl font-bold text-light mb-8 leading-tight tracking-tight">CloudGame: Next-Gen Browser Gaming Experience</h1>
                <p class="text-xl text-light/70 mb-10 max-w-3xl mx-auto">Experience the future of cloud gaming with CloudGame. Play your favorite games instantly in your browser — no downloads, no waiting. Join thousands of players enjoying seamless gaming today.</p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#explore-all-games" class="bg-primary text-white px-8 py-3 rounded-full hover:bg-primary/90 transition-colors duration-300 text-lg font-medium shadow-lg shadow-primary/20">Start Playing</a>
                    <a href="#features" class="bg-white text-primary border border-primary/20 px-8 py-3 rounded-full hover:bg-primary/5 transition-colors duration-300 text-lg font-medium shadow-sm">Learn More</a>
                </div>
            </div>
        </div>
    </section>

    <!-- All Games Showcase -->
    <section id="explore-all-games" class="py-24 bg-darker">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-light mb-4">Play Free Games on CloudGame</h2>
                <p class="text-light/70 max-w-3xl mx-auto">Discover our extensive collection of free online games across all categories. Start playing instantly with CloudGame's cloud gaming technology.</p>
            </div>

            <!-- Category Tabs -->
            <div class="flex justify-center mb-12 overflow-x-auto whitespace-nowrap pb-4">
                <button class="text-primary font-medium px-6 py-2.5 rounded-full bg-primary/20 hover:bg-primary/30 transition-colors duration-300 mx-1 border border-primary/30 category-btn active" data-category="all">All Games</button>
                <button class="text-action font-medium px-6 py-2.5 rounded-full hover:bg-action/20 transition-colors duration-300 mx-1 category-btn" data-category="action">Action</button>
                <button class="text-shooter font-medium px-6 py-2.5 rounded-full hover:bg-shooter/20 transition-colors duration-300 mx-1 category-btn" data-category="shooter">Shooter</button>
                <button class="text-puzzle font-medium px-6 py-2.5 rounded-full hover:bg-puzzle/20 transition-colors duration-300 mx-1 category-btn" data-category="puzzle">Puzzle</button>
                <button class="text-sports font-medium px-6 py-2.5 rounded-full hover:bg-sports/20 transition-colors duration-300 mx-1 category-btn" data-category="sports">Sports</button>
                <button class="text-fighting font-medium px-6 py-2.5 rounded-full hover:bg-fighting/20 transition-colors duration-300 mx-1 category-btn" data-category="fighting">Fighting</button>
                <button class="text-racing font-medium px-6 py-2.5 rounded-full hover:bg-racing/20 transition-colors duration-300 mx-1 category-btn" data-category="racing">Racing</button>
                <button class="text-anime font-medium px-6 py-2.5 rounded-full hover:bg-anime/20 transition-colors duration-300 mx-1 category-btn" data-category="anime">Anime</button>
                <button class="text-casual font-medium px-6 py-2.5 rounded-full hover:bg-casual/20 transition-colors duration-300 mx-1 category-btn" data-category="casual">Casual</button>
                <button class="text-adventure font-medium px-6 py-2.5 rounded-full hover:bg-adventure/20 transition-colors duration-300 mx-1 category-btn" data-category="adventure">Adventure</button>
            </div>

            <!-- Games Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Game 1: Original Featured -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="anime">
                    <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                        <a href="games/anime.html">
                            <img src="https://img.gamepix.com/games/om-nom-run/cover/om-nom-run.webp" alt="Play Om Nom Run on CloudGame - Free Online Anime Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                <div class="p-6">
                                    <span class="bg-anime/80 text-white text-xs px-2.5 py-1 rounded-full">Anime</span>
                                    <h3 class="text-white font-bold mt-2">Om Nom Run - CloudGame</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">Om Nom Run on CloudGame</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">Play Om Nom Run instantly on CloudGame. Help Om Nom run, jump and slide through colorful levels while collecting candies and avoiding obstacles. No download required.</p>
                        <a href="games/anime.html" class="inline-block bg-anime text-white px-5 py-2 rounded-full hover:bg-anime/90 transition-colors duration-300 text-sm font-medium">Play Now on CloudGame</a>
                    </div>
                </div>

                <!-- Game 2: Bubble Tower 3D -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="puzzle">
                    <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                        <a href="games/puzzle.html">
                            <img src="https://img.gamepix.com/games/bubble-tower-3d/cover/bubble-tower-3d.webp" alt="Play Bubble Tower 3D on CloudGame - Free Online Puzzle Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                <div class="p-6">
                                    <span class="bg-puzzle/80 text-white text-xs px-2.5 py-1 rounded-full">Puzzle</span>
                                    <h3 class="text-white font-bold mt-2">Bubble Tower 3D - CloudGame</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">Bubble Tower 3D on CloudGame</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">Play Bubble Tower 3D instantly on CloudGame. Match and pop colorful bubbles in this addictive 3D puzzle game with challenging levels. Free online gaming.</p>
                        <a href="games/puzzle.html" class="inline-block bg-puzzle text-white px-5 py-2 rounded-full hover:bg-puzzle/90 transition-colors duration-300 text-sm font-medium">Play Now on CloudGame</a>
                    </div>
                </div>

                <!-- Game 3: Cannon Balls 3D -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="shooter">
                    <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                        <a href="games/shooter.html">
                            <img src="https://img.gamepix.com/games/cannon-balls-3d/cover/cannon-balls-3d.webp" alt="Play Cannon Balls 3D on CloudGame - Free Online Shooter Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                <div class="p-6">
                                    <span class="bg-shooter/80 text-white text-xs px-2.5 py-1 rounded-full">Shooter</span>
                                    <h3 class="text-white font-bold mt-2">Cannon Balls 3D - CloudGame</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">Cannon Balls 3D on CloudGame</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">Play Cannon Balls 3D instantly on CloudGame. Take control of a powerful cannon and blast your way through challenging levels in this free online shooter game.</p>
                        <a href="games/shooter.html" class="inline-block bg-shooter text-white px-5 py-2 rounded-full hover:bg-shooter/90 transition-colors duration-300 text-sm font-medium">Play Now on CloudGame</a>
                    </div>
                </div>

                <!-- Game 4: Giant Rush -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="action">
                    <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                        <a href="games/action.html">
                            <img src="https://img.cdn.famobi.com/portal/html5games/images/tmp/GiantRushTeaser.jpg?v=0.2-e9a56fac" alt="Play Giant Rush on CloudGame - Free Online Action Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                <div class="p-6">
                                    <span class="bg-action/80 text-white text-xs px-2.5 py-1 rounded-full">Action</span>
                                    <h3 class="text-white font-bold mt-2">Giant Rush - CloudGame</h3>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">Giant Rush on CloudGame</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">Play Giant Rush instantly on CloudGame. Run, jump, and grow in this exciting endless runner game. Collect power-ups and become the biggest giant in this free online action game.</p>
                        <a href="games/action.html" class="inline-block bg-action text-white px-5 py-2 rounded-full hover:bg-action/90 transition-colors duration-300 text-sm font-medium">Play Now on CloudGame</a>
                    </div>
                </div>

                <!-- Game 5: 3D Free Kick -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="sports">
                    <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                        <img src="https://img.gamepix.com/games/3d-free-kick/cover/3d-free-kick.webp" alt="Play 3D Free Kick on CloudGame - Free Online Sports Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                            <div class="p-6">
                                <span class="bg-sports/80 text-white text-xs px-2.5 py-1 rounded-full">Sports</span>
                                <h3 class="text-white font-bold mt-2">3D Free Kick - CloudGame</h3>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">3D Free Kick on CloudGame</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">Play 3D Free Kick instantly on CloudGame. Experience the excitement of taking crucial free kicks in this realistic 3D football game. Free online sports gaming.</p>
                        <a href="games/sports.html" class="inline-block bg-sports text-white px-5 py-2 rounded-full hover:bg-sports/90 transition-colors duration-300 text-sm font-medium">Play Now on CloudGame</a>
                    </div>
                </div>

                <!-- Game 6: Coming Soon -->
                <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="new">
                    <div class="aspect-video bg-gradient-to-r from-primary/20 to-secondary/20 overflow-hidden relative group flex items-center justify-center">
                        <span class="text-xl font-bold text-primary">Coming Soon</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-semibold mb-2 text-light">New Release</h3>
                        <p class="text-light/70 mb-4 line-clamp-2">We're constantly adding new games to our collection. Check back soon for our latest releases!</p>
                        <a href="games/popular.html" class="inline-block bg-white border border-primary/30 text-primary px-5 py-2 rounded-full hover:bg-primary/5 transition-colors duration-300 text-sm font-medium">View Popular Games</a>
                    </div>
                </div>
            </div>

            <!-- View All Button -->
            <div class="text-center mt-12">
                <button id="view-more-games-btn" class="inline-block bg-primary text-white px-8 py-3 rounded-full hover:bg-primary/90 transition-colors duration-300 font-medium shadow-lg shadow-primary/20">View More Games</button>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section id="features" class="py-24 bg-dark">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-light mb-4">Why Choose CloudGame for Online Gaming</h2>
                <p class="text-light/70 max-w-3xl mx-auto">Experience the best in cloud gaming with features designed for modern gamers</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 border border-white/10">
                    <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Instant Play</h3>
                    <p class="text-light/70 leading-relaxed">No downloads or installations required. Start playing your favorite games instantly in your browser.</p>
                </div>
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 border border-white/10">
                    <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Secure Gaming</h3>
                    <p class="text-light/70 leading-relaxed">Advanced encryption and security measures to keep your gaming experience safe and private.</p>
                </div>
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 border border-white/10">
                    <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Cross-Platform</h3>
                    <p class="text-light/70 leading-relaxed">Play on any device with a modern web browser. Your progress syncs automatically.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section id="how-it-works" class="py-24 bg-darker">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-light mb-4">How CloudGame Works</h2>
                <p class="text-light/70 max-w-3xl mx-auto">Getting started is simple and seamless</p>
            </div>
            <div class="grid md:grid-cols-4 gap-8 max-w-5xl mx-auto">
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-primary">1</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Visit Website</h3>
                    <p class="text-light/70 leading-relaxed">Open CloudGame in your favorite browser</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-primary">2</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Choose Game</h3>
                    <p class="text-light/70 leading-relaxed">Select from our curated collection of games</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-primary">3</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Start Playing</h3>
                    <p class="text-light/70 leading-relaxed">Click play and enjoy instant gaming</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <span class="text-2xl font-bold text-primary">4</span>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-light">Save Progress</h3>
                    <p class="text-light/70 leading-relaxed">Your progress saves automatically</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="py-24 bg-dark">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-light mb-4">Frequently Asked Questions</h2>
                <p class="text-light/70 max-w-3xl mx-auto">Everything you need to know about CloudGame</p>
            </div>
            <div class="max-w-3xl mx-auto space-y-6">
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 border border-white/10">
                    <h3 class="text-xl font-semibold mb-3 text-light">What are the system requirements?</h3>
                    <p class="text-light/70 leading-relaxed">You only need a modern web browser and a stable internet connection. We recommend at least 10 Mbps for the best experience.</p>
                </div>
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 border border-white/10">
                    <h3 class="text-xl font-semibold mb-3 text-light">Can I play offline?</h3>
                    <p class="text-light/70 leading-relaxed">CloudGame requires an internet connection as all games are streamed directly to your browser.</p>
                </div>
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 border border-white/10">
                    <h3 class="text-xl font-semibold mb-3 text-light">How do I save my progress?</h3>
                    <p class="text-light/70 leading-relaxed">Your progress is automatically saved to your account. Simply log in on any device to continue where you left off.</p>
                </div>
                <div class="bg-darker p-8 rounded-2xl shadow-lg shadow-black/50 border border-white/10">
                    <h3 class="text-xl font-semibold mb-3 text-light">What payment methods do you accept?</h3>
                    <p class="text-light/70 leading-relaxed">We accept all major credit cards, PayPal, and various local payment methods depending on your region.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-darker text-light py-16 border-t border-white/10">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-10 mb-10">
                <div>
                    <h3 class="text-xl font-bold mb-6">CloudGame - Free Online Games</h3>
                    <p class="text-light/70 leading-relaxed">Experience the future of cloud gaming directly in your browser. Play instantly with CloudGame.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-6">Quick Links</h4>
                    <ul class="space-y-3">
                        <li><a href="#features" class="text-light/70 hover:text-light transition-colors duration-300">Features</a></li>
                        <li><a href="#how-it-works" class="text-light/70 hover:text-light transition-colors duration-300">How It Works</a></li>
                        <li><a href="#faq" class="text-light/70 hover:text-light transition-colors duration-300">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-6">Legal</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-light/70 hover:text-light transition-colors duration-300">Privacy Policy</a></li>
                        <li><a href="#" class="text-light/70 hover:text-light transition-colors duration-300">Terms of Service</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-6">Contact</h4>
                    <p class="text-light/70">Email: <a href="mailto:yanzhang582@gmail.com" class="hover:text-light transition-colors duration-300">yanzhang582@gmail.com</a></p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Game Categories</h4>
                    <ul class="space-y-2">
                        <li><a href="games/action.html" class="text-gray-400 hover:text-white">Action Games</a></li>
                        <li><a href="games/shooter.html" class="text-gray-400 hover:text-white">Shooter Games</a></li>
                        <li><a href="games/puzzle.html" class="text-gray-400 hover:text-white">Puzzle Games</a></li>
                        <li><a href="games/sports.html" class="text-gray-400 hover:text-white">Sports Games</a></li>
                        <li><a href="games/anime.html" class="text-gray-400 hover:text-white">Anime Games</a></li>
                        <li><a href="games/racing.html" class="text-gray-400 hover:text-white">Racing Games</a></li>
                        <li><a href="games/fighting.html" class="text-gray-400 hover:text-white">Fighting Games</a></li>
                        <li><a href="games/casual.html" class="text-gray-400 hover:text-white">Casual Games</a></li>
                        <li><a href="games/adventure.html" class="text-gray-400 hover:text-white">Adventure Games</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-white/10 pt-8">
                <p class="text-center text-light/70">&copy; 2024 CloudGame. All rights reserved. Created by yanzhang582</p>
            </div>
        </div>
    </footer>

    <!-- Category Filter Script -->
    <script>
        // 声明全局变量
        const gamesContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3.gap-8');
        console.log("Games container found:", gamesContainer ? "Yes" : "No", gamesContainer);
        // 如果默认选择器没找到，尝试找到任何合适的网格容器
        const gridSelector = '.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3.gap-8';
        const backupSelectors = [
            '.grid',
            '.games-grid',
            '[class*="grid"][class*="gap"]',
            '.games-container > div',
            '#explore-all-games .grid'
        ];
        
        // 尝试找到游戏容器
        function findGamesContainer() {
            let container = document.querySelector(gridSelector);
            
            if (!container) {
                console.warn(`Primary games container selector "${gridSelector}" not found. Trying fallback selectors...`);
                
                for (const selector of backupSelectors) {
                    container = document.querySelector(selector);
                    if (container) {
                        console.log(`Found games container using fallback selector "${selector}"`);
                        break;
                    }
                }
            }
            
            if (!container) {
                // 最后的尝试：查找具有3个或更多游戏卡片的容器
                const possibleContainers = document.querySelectorAll('div[class*="grid"], div[class*="container"]');
                for (const element of possibleContainers) {
                    if (element.querySelectorAll('.game-card, [class*="game"]').length >= 3) {
                        container = element;
                        console.log('Found games container by identifying element containing multiple game cards');
                        break;
                    }
                }
            }
            
            return container;
        }
        
        // 确保我们有一个游戏容器
        const detectedGamesContainer = gamesContainer || findGamesContainer();
        if (!detectedGamesContainer) {
            console.error('Could not find games container with any selector. Creating a new container.');
            // 创建新的游戏容器
            const newContainer = document.createElement('div');
            newContainer.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';
            
            // 在合适的位置插入新容器
            const insertPoint = document.querySelector('#explore-all-games .container.mx-auto .text-center.mt-12');
            if (insertPoint && insertPoint.parentNode) {
                insertPoint.parentNode.insertBefore(newContainer, insertPoint);
                console.log('Created and inserted new games container');
            }
        }
        
        // 最终的游戏容器
        const finalGamesContainer = detectedGamesContainer || document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3.gap-8');
        
        const viewMoreButton = document.getElementById('view-more-games-btn');
        console.log("View more button found:", viewMoreButton ? "Yes" : "No");
        const categoryButtons = document.querySelectorAll('.category-btn');
        let currentCategory = 'all';
        let currentPage = 1;
        const gamesPerPage = 6;
        let allGames = [];
        let additionalGames = [];
        
        // 游戏页面URL映射
        const gamePageUrls = {
            'action': 'games/action',
            'shooter': 'games/shooter',
            'puzzle': 'games/puzzle',
            'sports': 'games/sports',
            'fighting': 'games/fighting',
            'racing': 'games/racing',
            'anime': 'games/anime',
            'casual': 'games/casual',
            'adventure': 'games/adventure'
        };
        
        // 设置活动分类
        function setActiveCategory(category) {
            currentCategory = category;
            currentPage = 1;
            
            // 更新按钮的活动状态
            categoryButtons.forEach(btn => {
                const btnCategory = btn.getAttribute('data-category');
                if (btnCategory === category) {
                    btn.classList.add('active', 'bg-' + (category === 'all' ? 'primary' : category) + '/20');
                    btn.classList.remove('hover:bg-' + (category === 'all' ? 'primary' : category) + '/20');
                } else {
                    btn.classList.remove('active', 'bg-' + (btnCategory === 'all' ? 'primary' : btnCategory) + '/20');
                    btn.classList.add('hover:bg-' + (btnCategory === 'all' ? 'primary' : btnCategory) + '/20');
                }
            });
        }
        
        // 添加类别按钮事件监听器
        categoryButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                console.log(`Category button clicked: ${category}`);
                console.log(`Current games in allGames array: ${allGames.length}`);
                
                // 检查是否有该分类的游戏
                const categoryGames = allGames.filter(game => {
                    if (game.category === category) return true;
                    try {
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = game.html.trim();
                        const gameCard = tempDiv.querySelector('.game-card');
                        return gameCard && gameCard.getAttribute('data-category') === category;
                    } catch (error) {
                        return false;
                    }
                });
                console.log(`Found ${categoryGames.length} games for category ${category}`);
                
                // Set active category and update buttons
                setActiveCategory(category);
                
                // Display the games
                displayGames(category, 1);
                
                // Update the View More button immediately
                if (category !== 'all' && gamePageUrls[category]) {
                    viewMoreButton.textContent = `View All ${category.charAt(0).toUpperCase() + category.slice(1)} Games`;
                    viewMoreButton.setAttribute('data-url', gamePageUrls[category]);
                    viewMoreButton.className = `inline-block bg-${category} text-white px-8 py-3 rounded-full hover:bg-${category}/90 transition-colors duration-300 font-medium shadow-lg shadow-${category}/20`;
                    viewMoreButton.style.display = 'inline-block';
                }
            });
        });
        
        // 更新显示更多按钮的可见性
        function updateViewMoreButtonVisibility(totalGames, displayedCount) {
            console.log(`Updating "View More" button visibility: ${displayedCount} of ${totalGames} games shown`);
            
            // 移除之前可能存在的"所有游戏已显示"消息
            const existingMessages = document.querySelectorAll('.all-shown-message');
            existingMessages.forEach(msg => msg.remove());
            
            // 如果所有游戏都已显示，隐藏按钮并添加"所有游戏已显示"信息
            if (displayedCount >= totalGames) {
                viewMoreButton.style.display = 'none';
                
                // 添加"所有游戏已显示"信息
                const allShownMessage = document.createElement('p');
                allShownMessage.className = 'text-light/50 text-center mt-4 all-shown-message';
                allShownMessage.textContent = `All ${totalGames} ${currentCategory === 'all' ? '' : currentCategory} games have been shown`;
                
                // 将消息添加到viewMoreButton的父元素
                const viewMoreContainer = document.querySelector('.text-center.mt-12');
                if (viewMoreContainer) {
                    viewMoreContainer.appendChild(allShownMessage);
                }
            } else {
                // 否则，显示按钮并更新文本
                viewMoreButton.style.display = 'inline-block';
                
                if (currentCategory !== 'all') {
                    // 为特定分类，显示"View More [Category] Games"
                    viewMoreButton.textContent = `View More ${currentCategory.charAt(0).toUpperCase() + currentCategory.slice(1)} Games (${displayedCount}/${totalGames})`;
                    // 不设置data-url属性，这样点击会加载更多而不是跳转
                    viewMoreButton.removeAttribute('data-url');
                    // 添加特定分类的类
                    viewMoreButton.className = `inline-block bg-${currentCategory} text-white px-8 py-3 rounded-full hover:bg-${currentCategory}/90 transition-colors duration-300 font-medium shadow-lg shadow-${currentCategory}/20`;
                } else {
                    // 否则，显示一般的"View More Games"信息
                    const remainingGames = totalGames - displayedCount;
                    viewMoreButton.textContent = `View More Games (${displayedCount}/${totalGames} - ${remainingGames} remaining)`;
                    // 清除data-url属性
                    viewMoreButton.removeAttribute('data-url');
                    // 恢复默认的primary类
                    viewMoreButton.className = 'inline-block bg-primary text-white px-8 py-3 rounded-full hover:bg-primary/90 transition-colors duration-300 font-medium shadow-lg shadow-primary/20';
                }
            }
        }
        
        // 添加查看更多按钮事件监听器
        viewMoreButton.addEventListener('click', function() {
            // 检查是否有指定的URL
            const targetUrl = this.getAttribute('data-url');
            if (targetUrl && currentCategory !== 'all') {
                // 如果是特定分类，跳转到对应的分类页面
                // 确保URL以相对路径方式访问
                window.location.href = targetUrl;
                return;
            }
            
            // 否则，执行默认的"加载更多"行为
            // 禁用按钮，显示加载状态
            this.disabled = true;
            
            const totalGames = currentCategory === 'all' 
                ? allGames.length
                : allGames.filter(game => game.category === currentCategory).length;
            
            const displayedGames = document.querySelectorAll('.game-card').length;
            const remainingGames = totalGames - displayedGames;
            
            this.textContent = `Loading... (${remainingGames} remaining)`;
            this.classList.add('loading');
            
            // 短暂延迟以显示加载状态
            setTimeout(() => {
                currentPage++;
                console.log(`View more button clicked. Loading page ${currentPage} of ${currentCategory} category`);
                displayGames(currentCategory, currentPage, true);
                
                // 重新启用按钮
                this.disabled = false;
                this.classList.remove('loading');
            }, 800);
        });

        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded, initializing game system...');
            
            // 查找页面上已有的游戏卡片
            const existingGameCards = document.querySelectorAll('.game-card');
            console.log(`Found ${existingGameCards.length} existing game cards on the page`);
            
            if (existingGameCards.length > 0) {
                // 将已有的游戏卡片添加到allGames数组
                existingGameCards.forEach(card => {
                    const category = card.getAttribute('data-category');
                    if (category) {
                        console.log(`Adding existing ${category} game card to allGames`);
                        allGames.push({
                            category: category,
                            html: card.outerHTML
                        });
                    }
                });
            }
            
            // 添加初始的分类游戏作为占位符 - 仅在没有已有游戏时添加
            if (existingGameCards.length === 0) {
                addCategoryGames();
            }
            
            // 设置当前分类
            setActiveCategory('all');
            
            // 立即开始获取所有分类页面的游戏
            console.log('Starting to fetch games from all category pages');
            fetchGamesFromPages();
            
            // Optimize category button clicks to prevent redundant operations
            categoryButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Avoid reloading the same category
                    if (category === currentCategory) {
                        console.log(`Category ${category} already active, skipping reload`);
                        return;
                    }
                    
                    console.log(`Category button clicked: ${category}`);
                    
                    // Set active category and update buttons
                    setActiveCategory(category);
                    
                    // Display the games with minimal delay
                    requestAnimationFrame(() => {
                        displayGames(category, 1);
                    });
                });
            });
        });

        // 初始化游戏列表
        let gamesInitialized = false; // 游戏初始化状态

        function initializeGames() {
            // 如果已经初始化过，则不再重复初始化
            if (gamesInitialized) {
                console.log('Games already initialized, skipping initialization');
                return;
            }
            
            console.log('Initializing games from loaded content...');
            
            // Don't clear the container here since we want to keep displayed games
            // finalGamesContainer.innerHTML = '';
            
            // 重新规整allGames数组，确保游戏不重复
            const uniqueGameTitles = new Set();
            const uniqueGames = [];
            
            allGames.forEach(game => {
                // 解析游戏HTML以获取标题
                try {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = game.html.trim();
                    const gameCard = tempDiv.querySelector('.game-card');
                    
                    if (gameCard) {
                        // 从不同元素尝试获取标题
                        let title = '';
                        const h3Elements = gameCard.querySelectorAll('h3');
                        
                        if (h3Elements.length > 0) {
                            // 如果有多个h3，取最长的那个作为标题
                            h3Elements.forEach(h3 => {
                                if (h3.textContent.length > title.length) {
                                    title = h3.textContent.trim();
                                }
                            });
                        }
                        
                        // 标题清理，移除" - CloudGame"和"on CloudGame"等后缀
                        title = title.replace(/ - CloudGame$/i, '').replace(/ on CloudGame$/i, '');
                        
                        // 如果这个标题是唯一的，添加到唯一游戏列表中
                        if (!uniqueGameTitles.has(title) && title !== 'Loading - CloudGame') {
                            uniqueGameTitles.add(title);
                            uniqueGames.push(game);
                        }
                    }
                } catch (error) {
                    console.error('Error processing game card:', error);
                }
            });
            
            // 更新allGames数组
            allGames = uniqueGames;
            console.log(`Total unique games after initialization: ${allGames.length}`);
            
            // Don't refresh the display here, games are already displayed
            // displayGames(currentCategory, 1);
            
            // 标记为已初始化
            gamesInitialized = true;
            
            // 隐藏加载中的占位符
            finalGamesContainer.querySelectorAll('.game-card').forEach(card => {
                if (card.querySelector('h3') && card.querySelector('h3').textContent.includes('Loading')) {
                    card.style.display = 'none';
                }
            });
        }

        // 添加各个分类的游戏
        function addCategoryGames() {
            console.log("Adding initial category games as placeholders until real games are loaded");
            
            // 清空全局游戏数组
            allGames = [];
            additionalGames = [];
            
            // 添加各个分类的初始游戏作为占位符
            const initialCategoryGames = Object.keys(gamePageUrls).map(category => {
                // 为每个分类创建一个占位符游戏
                return {
                    category: category,
                    html: `
                        <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="${category}">
                            <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                                <div class="w-full h-full bg-gradient-to-r from-${category} to-${category}/50 flex items-center justify-center">
                                    <span class="text-xl font-bold text-white">Loading ${category} games...</span>
                                </div>
                                <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                    <div class="p-6">
                                        <span class="bg-${category}/80 text-white text-xs px-2.5 py-1 rounded-full">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                                        <h3 class="text-white font-bold mt-2">Loading - CloudGame</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2 text-light">Loading ${category} games...</h3>
                                <p class="text-light/70 mb-4 line-clamp-2">Please wait while we fetch the latest ${category} games for you.</p>
                                <div class="inline-block bg-${category} text-white px-5 py-2 rounded-full hover:bg-${category}/90 transition-colors duration-300 text-sm font-medium">Loading...</div>
                            </div>
                        </div>
                    `
                };
            });
            
            // 添加到allGames和additionalGames
            allGames = [...initialCategoryGames];
            additionalGames = [...initialCategoryGames];
            
            console.log(`Added ${initialCategoryGames.length} initial placeholder games`);
        }
        
        // Function to load static game data when in production or on fetch errors
        function loadStaticGameData() {
            console.log('Loading static game data immediately...');
            
            // Immediately mark as initialized to prevent duplicate loading attempts
            gamesInitialized = true;
            
            // Clear loading state
            viewMoreButton.textContent = 'View More Games';
            viewMoreButton.disabled = false;
            
            // Static game data by category
            const staticGameData = {
                action: [
                    {
                        title: "Giant Rush",
                        description: "Run through the city and collect coins while dodging obstacles in this exciting endless runner game. Perfect your timing for the ultimate high score!",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/GiantRushTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/action.html"
                    },
                    {
                        title: "Flip Runner",
                        description: "Master the art of parkour with this addictive action game. Perform incredible flips and tricks as you navigate through challenging obstacle courses.",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/BottleFlipTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/action.html"
                    },
                    {
                        title: "Slither.io",
                        description: "Grow your snake by consuming glowing orbs and defeating other players in this multiplayer action game. How big can you grow?",
                        image: "https://img.gamepix.com/games/slither-io/cover/slither-io.webp",
                        url: "games/action.html"
                    }
                ],
                puzzle: [
                    {
                        title: "Bubble Tower 3D",
                        description: "Match and pop colorful bubbles in this addictive 3D puzzle game. Test your strategic thinking with increasingly challenging levels.",
                        image: "https://img.gamepix.com/games/bubble-tower-3d/cover/bubble-tower-3d.webp",
                        url: "games/puzzle.html"
                    },
                    {
                        title: "2048",
                        description: "Combine matching numbers in this addictive puzzle game to reach the elusive 2048 tile. Plan your moves carefully!",
                        image: "https://img.gamepix.com/games/2048/cover/2048.webp",
                        url: "games/puzzle.html"
                    },
                    {
                        title: "Mahjong Connect",
                        description: "Match identical tiles in this relaxing Mahjong puzzle game. Clear the board before time runs out!",
                        image: "https://img.gamepix.com/games/mahjong-connect/cover/mahjong-connect.webp",
                        url: "games/puzzle.html"
                    }
                ],
                shooter: [
                    {
                        title: "Cannon Balls 3D",
                        description: "Take control of a powerful cannon and blast your way through challenging levels in this exciting 3D shooter game.",
                        image: "https://img.gamepix.com/games/cannon-balls-3d/cover/cannon-balls-3d.webp",
                        url: "games/shooter.html"
                    },
                    {
                        title: "Zombie Survival",
                        description: "Survive waves of relentless zombies in this action-packed shooter. Upgrade your weapons and defenses to survive longer.",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/ZombiesEatMyStockingTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/shooter.html"
                    },
                    {
                        title: "Space Blaze",
                        description: "Pilot your spaceship through dangerous asteroid fields and enemy fleets in this classic space shooter game.",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/BlazeKickTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/shooter.html"
                    }
                ],
                anime: [
                    {
                        title: "Om Nom Run",
                        description: "Help the adorable little monster Om Nom collect candy while running through colorful environments.",
                        image: "https://img.gamepix.com/games/om-nom-run/cover/om-nom-run.webp",
                        url: "games/anime.html"
                    },
                    {
                        title: "Anime Adventure",
                        description: "Embark on an epic journey through colorful anime-inspired worlds. Battle mysterious enemies and make allies.",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/3d_AnimeFantasyTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/anime.html"
                    },
                    {
                        title: "Manga Puzzle",
                        description: "Test your puzzle skills with beautiful manga-inspired artwork. Complete the images by arranging the pieces correctly.",
                        image: "https://img.cdn.famobi.com/portal/html5games/images/tmp/HexPuzzleTeaser.jpg?v=0.2-e9a56fac",
                        url: "games/anime.html"
                    }
                ],
                sports: [
                    {
                        title: "3D Free Kick",
                        description: "Experience the excitement of taking crucial free kicks in this realistic 3D football game. Free online sports gaming.",
                        image: "https://img.gamepix.com/games/3d-free-kick/cover/3d-free-kick.webp",
                        url: "./games/sports.html"
                    },
                    {
                        title: "Basketball Stars",
                        description: "Show off your basketball skills in this fast-paced sports game. Compete against players worldwide to become the best.",
                        image: "https://img.gamepix.com/games/basketball-stars/cover/basketball-stars.webp",
                        url: "./games/sports.html"
                    },
                    {
                        title: "Tennis Pro",
                        description: "Master your tennis skills with realistic physics and controls. Compete in tournaments and climb the world rankings.",
                        image: "https://img.gamepix.com/games/tennis-pro/cover/tennis-pro.webp",
                        url: "./games/sports.html"
                    }
                ],
                fighting: [
                    {
                        title: "Shadow Fighter",
                        description: "Master martial arts techniques and defeat opponents in this intense fighting game with stunning visuals.",
                        image: "https://img.gamepix.com/games/shadow-fighter/cover/shadow-fighter.webp",
                        url: "./games/fighting.html"
                    },
                    {
                        title: "Street Kombat",
                        description: "Choose your fighter and execute powerful combos in this classic arcade-style fighting game with modern graphics.",
                        image: "https://img.gamepix.com/games/street-kombat/cover/street-kombat.webp",
                        url: "./games/fighting.html"
                    },
                    {
                        title: "Boxing Star",
                        description: "Rise through the ranks from amateur to professional boxer in this realistic boxing simulation game.",
                        image: "https://img.gamepix.com/games/boxing-star/cover/boxing-star.webp",
                        url: "./games/fighting.html"
                    }
                ],
                racing: [
                    {
                        title: "Speed Racer",
                        description: "Feel the adrenaline rush of high-speed racing in this exciting 3D racing game with multiple track options.",
                        image: "https://img.gamepix.com/games/speed-racer/cover/speed-racer.webp",
                        url: "./games/racing.html"
                    },
                    {
                        title: "Drift King",
                        description: "Master the art of drifting in this high-octane racing game. Unlock new cars and tracks as you progress.",
                        image: "https://img.gamepix.com/games/drift-king/cover/drift-king.webp",
                        url: "./games/racing.html"
                    },
                    {
                        title: "Moto X3M",
                        description: "Race against time on your motorcycle through challenging obstacle courses. Perform stunts for extra points!",
                        image: "https://img.gamepix.com/games/moto-x3m/cover/moto-x3m.webp",
                        url: "./games/racing.html"
                    }
                ]
            };
            
            // Clear the existing game container first
            finalGamesContainer.innerHTML = '';
            
            // Reset game arrays to avoid duplicates
            allGames = [];
            additionalGames = [];
            
            // Immediately generate and display game cards for all categories
            let staticGames = [];
            
            Object.entries(staticGameData).forEach(([category, games]) => {
                games.forEach(game => {
                    const gameHtml = `
                        <div class="bg-darker rounded-2xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="${category}">
                            <div class="aspect-video bg-gray-100 overflow-hidden relative group">
                                <img src="${game.image}" alt="Play ${game.title} on CloudGame - Free Online ${category.charAt(0).toUpperCase() + category.slice(1)} Games" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                                <div class="absolute inset-0 bg-gradient-to-t from-darker/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end">
                                    <div class="p-6">
                                        <span class="bg-${category}/80 text-white text-xs px-2.5 py-1 rounded-full">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                                        <h3 class="text-white font-bold mt-2">${game.title} - CloudGame</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2 text-light">${game.title} on CloudGame</h3>
                                <p class="text-light/70 mb-4 line-clamp-2">${game.description}</p>
                                <a href="${game.url}" class="inline-block bg-${category} text-white px-5 py-2 rounded-full hover:bg-${category}/90 transition-colors duration-300 text-sm font-medium">Play on CloudGame</a>
                            </div>
                        </div>
                    `;
                    
                    staticGames.push({
                        category: category,
                        html: gameHtml
                    });
                    
                    // If this game belongs to the current category or all games are shown,
                    // append it immediately to the container for faster rendering
                    if (currentCategory === 'all' || currentCategory === category) {
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = gameHtml.trim();
                        const gameElement = tempDiv.firstElementChild;
                        if (gameElement) {
                            finalGamesContainer.appendChild(gameElement);
                        }
                    }
                });
            });
            
            console.log(`Generated and displayed ${staticGames.length} static game entries`);
            
            // Add static games to global arrays
            additionalGames = [...staticGames];
            allGames = [...staticGames];
            
            // Update the View More button visibility
            const totalGames = currentCategory === 'all' ? 
                staticGames.length : 
                staticGames.filter(g => g.category === currentCategory).length;
                
            const displayedGames = document.querySelectorAll(`.game-card[data-category="${currentCategory}"]`).length;
            
            updateViewMoreButtonVisibility(totalGames, displayedGames);
        }

        // From various category pages
        async function fetchGamesFromPages() {
            console.log('Fetching games from all category pages...');

            if (!finalGamesContainer) {
                console.error('Cannot fetch games: No games container found on the page');
                return;
            }

            // Show loading state while ensuring users can still interact
            viewMoreButton.textContent = 'Loading games...';
            viewMoreButton.disabled = false;

            try {
                // Check if gamePageUrls is defined
                if (!gamePageUrls || Object.keys(gamePageUrls).length === 0) {
                    console.error('gamePageUrls is not defined or empty!');
                    loadStaticGameData();
                    return;
                }
                
                console.log('Game page URLs:', gamePageUrls);
                
                // Load static game data first as placeholders until real data is fetched
                loadStaticGameData();
                
                // Detect environment
                const hostName = window.location.hostname;
                const isProduction = hostName === 'cloudgame.info' || 
                                     hostName === 'www.cloudgame.info' ||
                                     !hostName.includes('localhost');
                
                console.log(`Environment detected: ${isProduction ? 'Production' : 'Local'}`);
                
                // Prepare all category page URLs with corrected paths
                const urls = Object.entries(gamePageUrls).map(([category, url]) => {
                    // Fix URL format to prevent issues
                    let fixedUrl = url;
                    if (!url.includes('.html') && !url.endsWith('/')) {
                        fixedUrl = url + '.html';
                    }
                    
                    // Make URL absolute for testing
                    let fullUrl = fixedUrl;
                    if (!fixedUrl.startsWith('http')) {
                        const baseUrl = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
                        fullUrl = baseUrl + fixedUrl;
                    }
                    
                    console.log(`Mapped ${category} to URL: ${fullUrl}`);
                    return { category, url: fullUrl };
                });
                
                console.log(`Will fetch games from ${urls.length} category pages in background:`, urls.map(u => u.url));
                
                // Prioritize fetching fighting category to address the specific issue mentioned
                const prioritizedUrls = [...urls];
                
                // Move fighting category to the front if it exists
                const fightingIndex = prioritizedUrls.findIndex(item => item.category === 'fighting');
                if (fightingIndex !== -1) {
                    const fightingItem = prioritizedUrls.splice(fightingIndex, 1)[0];
                    prioritizedUrls.unshift(fightingItem);
                    console.log("Prioritized fighting category to ensure consistent display");
                }
                
                // Fetch real data
                setTimeout(() => {
                    console.log("Starting background fetch of real game data...");
                    fetchRealGameData(prioritizedUrls);
                }, 300);
            } catch (error) {
                console.error('Error in fetch setup:', error);
            } finally {
                viewMoreButton.textContent = 'View More Games';
                viewMoreButton.disabled = false;
            }
        }

        // Enhanced function to fetch real game data from category pages
        async function fetchRealGameData(urls) {
            try {
                console.log("Starting real data fetch for all category pages");

                // Clear the new games array at the start
                let categoryGames = {};
                let newGames = [];
                
                // Process each category one at a time to ensure completeness
                for (const { category, url } of urls) {
                    console.log(`Fetching games from ${category} category: ${url}`);
                    
                    try {
                        // Add timeout to prevent long-running requests
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 8000); // 8 second timeout - increased for reliability
                        
                        const response = await fetch(url, { 
                            signal: controller.signal,
                            credentials: 'same-origin',
                            headers: {
                                'Cache-Control': 'no-cache',
                                'Pragma': 'no-cache'
                            }
                        });
                        
                        clearTimeout(timeoutId);
                        
                        if (!response.ok) {
                            throw new Error(`Failed to fetch ${url}: ${response.status} ${response.statusText}`);
                        }
                        
                        const html = await response.text();
                        
                        // Parse HTML
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        // Try different selectors to find game cards in the category pages
                        const gameCardSelectors = [
                            '.game-card',
                            '.bg-white.rounded-xl.overflow-hidden',  // Matches format in action.html
                            '.bg-white.rounded-xl',
                            '.bg-darker.rounded-xl',
                            '.rounded-xl.overflow-hidden',
                            '.card',
                            '[class*="game"][class*="card"]'
                        ];
                        
                        let allGameCards = [];
                        
                        // Try each selector until we find some game cards
                        for (const selector of gameCardSelectors) {
                            const elements = doc.querySelectorAll(selector);
                            if (elements.length > 0) {
                                console.log(`Found ${elements.length} game elements with selector "${selector}" in ${category}`);
                                allGameCards = Array.from(elements);
                                break;
                            }
                        }
                        
                        // If no game cards found with standard selectors, try to find Featured Game section
                        if (allGameCards.length === 0) {
                            // Check for featured game sections
                            const featuredGameSection = doc.querySelector('section.py-10.bg-white, section.featured-game, section:has(.aspect-video)');
                            if (featuredGameSection) {
                                const featuredGameCard = featuredGameSection.querySelector('.rounded-xl.overflow-hidden, .aspect-video, .game-card');
                                if (featuredGameCard) {
                                    console.log(`Found featured game in ${category}`);
                                    allGameCards.push(featuredGameCard);
                                }
                            }
                        }
                        
                        // Skip if no game cards found
                        if (allGameCards.length === 0) {
                            console.warn(`No game elements found in ${category} category page.`);
                            continue;
                        }
                        
                        // Store all games for this category
                        categoryGames[category] = [];
                        
                        // Add the entire game grid container
                        console.log(`Processing ${allGameCards.length} games from ${category} category`);
                        
                        // Process the found game cards and convert them to the format needed for index.html
                        for (const gameCard of allGameCards) {
                            try {
                                // Extract game details
                                let gameTitle = '';
                                let gameDescription = '';
                                let gameImage = '';
                                let gameUrl = '';
                                let gameIframeUrl = '';
                                let gameHtml = '';
                                
                                // Check if this is a complete game card we can preserve as-is
                                const isFullGameCard = gameCard.classList.contains('bg-white') || 
                                                      gameCard.classList.contains('bg-darker') ||
                                                      gameCard.classList.contains('rounded-xl');
                                
                                if (isFullGameCard) {
                                    // Clone the card to preserve its original structure
                                    const clonedCard = gameCard.cloneNode(true);
                                    
                                    // Update styling while keeping the structure
                                    if (clonedCard.classList.contains('bg-white')) {
                                        clonedCard.classList.remove('bg-white');
                                        clonedCard.classList.add('bg-darker');
                                    }
                                    
                                    if (!clonedCard.classList.contains('game-card')) {
                                        clonedCard.classList.add('game-card');
                                    }
                                    
                                    // Add standardized classes for shadows, borders, etc.
                                    clonedCard.classList.add('shadow-lg', 'shadow-black/50', 'hover:shadow-xl', 'hover:shadow-black/50', 
                                                                 'transition-shadow', 'duration-300', 'border', 'border-white/10');
                                    
                                    // Add data-category attribute
                                    clonedCard.setAttribute('data-category', category);
                                    
                                    // Get the game title for tracking
                                    const titleElement = clonedCard.querySelector('h3');
                                    if (titleElement) {
                                        gameTitle = titleElement.textContent.trim();
                                    }
                                    
                                    // Fix any buttons/links to use the category color
                                    const buttons = clonedCard.querySelectorAll('a, button');
                                    buttons.forEach(button => {
                                        if (button.classList.contains('bg-action') || 
                                            button.classList.contains('bg-primary') ||
                                            button.classList.contains('bg-secondary')) {
                                            
                                            // Remove old color classes
                                            button.classList.remove('bg-action', 'bg-primary', 'bg-secondary');
                                            button.classList.remove('hover:bg-action/90', 'hover:bg-primary/90', 'hover:bg-secondary/90');
                                            
                                            // Add appropriate category color
                                            button.classList.add(`bg-${category}`);
                                            button.classList.add(`hover:bg-${category}/90`);
                                        }
                                        
                                        // Update "Play Now" links to include onclick handler for playGame function
                                        if (button.textContent.trim() === 'Play Now') {
                                            const iframeElement = clonedCard.querySelector('iframe');
                                            if (iframeElement && iframeElement.src) {
                                                gameIframeUrl = iframeElement.src;
                                                
                                                // Update the button to use the playGame function
                                                button.setAttribute('href', 'javascript:void(0)');
                                                button.setAttribute('onclick', `playGame('${gameIframeUrl}')`);
                                            }
                                        }
                                    });
                                    
                                    // Fix text colors for dark background
                                    const paragraphs = clonedCard.querySelectorAll('p');
                                    paragraphs.forEach(p => {
                                        if (p.classList.contains('text-gray-600')) {
                                            p.classList.remove('text-gray-600');
                                            p.classList.add('text-light/70');
                                        }
                                    });
                                    
                                    const h3Elements = clonedCard.querySelectorAll('h3');
                                    h3Elements.forEach(h3 => {
                                        if (!h3.classList.contains('text-light')) {
                                            h3.classList.add('text-light');
                                        }
                                    });
                                    
                                    // Use the cloned card's HTML as our game card
                                    gameHtml = clonedCard.outerHTML;
                                } else {
                                    // Extract data from individual elements if not a full card
                                    
                                    // Try to extract title
                                    const titleElement = gameCard.querySelector('h3');
                                    if (titleElement) {
                                        gameTitle = titleElement.textContent.trim();
                                    }
                                    
                                    // Try to extract description
                                    const descElement = gameCard.querySelector('p.text-gray-600, p');
                                    if (descElement) {
                                        gameDescription = descElement.textContent.trim();
                                    }
                                    
                                    // Try to extract image
                                    const imgElement = gameCard.querySelector('img');
                                    if (imgElement && imgElement.src) {
                                        gameImage = imgElement.src;
                                    } else {
                                        // Try to extract from iframe if no image found
                                        const iframeElement = gameCard.querySelector('iframe');
                                        if (iframeElement && iframeElement.src) {
                                            gameIframeUrl = iframeElement.src;
                                            // Generate a placeholder image if using an iframe
                                            gameImage = `https://img.gamepix.com/games/${category}-game/cover/${category}-game.webp`;
                                        }
                                    }
                                    
                                    // Try to extract URL from any link
                                    if (!gameUrl) {
                                        const linkElement = gameCard.querySelector('a[href], a[onclick]');
                                        if (linkElement) {
                                            if (linkElement.href && !linkElement.href.includes('javascript:void')) {
                                                gameUrl = linkElement.href;
                                            } else if (linkElement.getAttribute('onclick')) {
                                                // Extract URL from onclick handler
                                                const onclickAttr = linkElement.getAttribute('onclick');
                                                const urlMatch = onclickAttr.match(/['"]([^'"]*)['"]/);
                                                if (urlMatch && urlMatch[1]) {
                                                    gameIframeUrl = urlMatch[1];
                                                }
                                            }
                                        }
                                    }
                                    
                                    // Create game card that mimics the category page style
                                    // This format is based on the action.html game cards
                                    gameHtml = `
                                        <div class="bg-darker rounded-xl overflow-hidden shadow-lg shadow-black/50 hover:shadow-xl hover:shadow-black/50 transition-shadow duration-300 game-card border border-white/10" data-category="${category}">
                                            <div class="aspect-video bg-gray-100 overflow-hidden">
                                                ${gameIframeUrl ? 
                                                    `<iframe src="${gameIframeUrl}" 
                                                            class="w-full h-full border-0"
                                                            allow="fullscreen; autoplay; gamepad"
                                                            title="${gameTitle || category + ' game'}">
                                                    </iframe>` : 
                                                    `<img src="${gameImage || `https://img.gamepix.com/games/${category}-game/cover/${category}-game.webp`}" 
                                                         alt="Play ${gameTitle || category + ' game'} on CloudGame" 
                                                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">`
                                                }
                                            </div>
                                            <div class="p-6">
                                                <h3 class="text-xl font-semibold mb-2 text-light">${gameTitle || `${category.charAt(0).toUpperCase() + category.slice(1)} Game`}</h3>
                                                <p class="text-light/70 mb-4">${gameDescription || `Enjoy this exciting ${category} game on CloudGame.`}</p>
                                                <a href="javascript:void(0)" onclick="playGame('${gameIframeUrl || `https://play.famobi.com/${category}-game`}')" class="inline-block bg-${category} text-white px-4 py-2 rounded-lg hover:bg-${category}/90 transition">Play Now</a>
                                            </div>
                                        </div>
                                    `;
                                }
                                
                                // Create the game object
                                const gameObject = {
                                    category: category,
                                    title: gameTitle,
                                    html: gameHtml
                                };
                                
                                // Add to category-specific array
                                categoryGames[category].push(gameObject);
                                
                            } catch (e) {
                                console.error('Error processing game card:', e);
                            }
                        }
                        
                        console.log(`Successfully processed ${categoryGames[category].length} games from ${category} category`);
                        
                    } catch (error) {
                        console.error(`Error fetching ${category} category:`, error);
                    }
                    
                    // Short delay between categories to prevent browser from becoming unresponsive
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                // After all categories are processed, combine them into the newGames array
                // This ensures complete categories are added together
                
                // First, add all games from each category
                for (const category in categoryGames) {
                    if (categoryGames[category] && categoryGames[category].length > 0) {
                        console.log(`Adding ${categoryGames[category].length} ${category} games to new games array`);
                        newGames = [...newGames, ...categoryGames[category]];
                    }
                }
                
                console.log(`Fetched ${newGames.length} total games from all category pages`);
                
                // Replace existing games with the new ones from category pages
                if (newGames.length > 0) {
                    allGames = [...newGames];
                    console.log(`Total games after merge: ${allGames.length}`);
                    
                    // Reinitialize and refresh the display to show the real games
                    initializeGames();
                    
                    // Update displayed games
                    displayGames(currentCategory, 1);
                }
            } catch (error) {
                console.error('Error fetching real game data:', error);
            }
        }

        // 显示游戏列表的函数
        function displayGames(category, page, isAppending = false) {
            console.log(`Displaying games for category: ${category}, page: ${page}, appending: ${isAppending}`);
            
            // 如果不是追加模式，则清空游戏容器
            if (!isAppending) {
                finalGamesContainer.innerHTML = '';
            }
            
            // 根据分类筛选游戏
            let filteredGames;
            if (category === 'all') {
                // For "all" category, include games from all categories
                filteredGames = allGames;
            } else {
                // For specific categories, only show games from that category
                filteredGames = allGames.filter(game => game.category === category);
            }
            
            console.log(`Found ${filteredGames.length} games for category ${category}`);
            
            // 如果没有找到游戏
            if (filteredGames.length === 0) {
                if (!isAppending) {
                    const noGamesMessage = category === 'all' 
                        ? 'No games found. Please try again later.' 
                        : `No games found in ${category} category. Please try again later.`;
                    
                    finalGamesContainer.innerHTML = `<div class="col-span-3 text-center py-12">
                        <p class="text-xl text-light/50">${noGamesMessage}</p>
                        <button onclick="fetchGamesFromPages()" class="mt-4 bg-primary text-white px-5 py-2 rounded-full hover:bg-primary/90 transition-colors duration-300 text-sm font-medium">Reload</button>
                    </div>`;
                }
                viewMoreButton.style.display = 'none';
                return;
            }
            
            // 减少处理量，使用轻量级去重
            const uniqueGameTitles = new Set();
            const uniqueFilteredGames = [];
            
            // 创建一个DocumentFragment以减少DOM操作
            const fragment = document.createDocumentFragment();
            
            // 计算分页 - 初始显示9个游戏，然后每次加载更多时显示6个
            const gamesPerInitialPage = 9; // Initially show 9 games as specified in requirements
            const totalGames = filteredGames.length;
            const startIndex = (page === 1) ? 0 : (gamesPerInitialPage + (page - 2) * gamesPerPage);
            const endIndex = (page === 1) 
                ? Math.min(gamesPerInitialPage, totalGames) 
                : Math.min(startIndex + gamesPerPage, totalGames);
            const gamesToShow = filteredGames.slice(startIndex, endIndex);
            
            console.log(`Showing games from index ${startIndex} to ${endIndex} (${gamesToShow.length} games)`);
            
            if (gamesToShow.length === 0) {
                if (!isAppending) {
                    finalGamesContainer.innerHTML = `<div class="col-span-3 text-center py-12">
                        <p class="text-xl text-light/50">No more games found in this category.</p>
                    </div>`;
                }
                viewMoreButton.style.display = 'none';
                return;
            }
            
            // 批量处理游戏元素添加
            let uniqueCount = 0;
            
            try {
                gamesToShow.forEach((game, index) => {
                    try {
                        // Check if we need to apply deduplication
                        let skipThisGame = false;
                        
                        // Extract title for deduplication check
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = game.html.trim();
                        const gameElement = tempDiv.firstElementChild;
                        
                        if (gameElement) {
                            const h3Elements = gameElement.querySelectorAll('h3');
                            let title = '';
                            
                            // Extract title if h3 elements exist
                            if (h3Elements.length > 0) {
                                h3Elements.forEach(h3 => {
                                    if (h3.textContent.length > title.length) {
                                        title = h3.textContent.trim();
                                    }
                                });
                                
                                // Clean title
                                title = title.replace(/ - CloudGame$/i, '').replace(/ on CloudGame$/i, '');
                                
                                // Check if this title is already added
                                if (uniqueGameTitles.has(title) || title.includes('Loading')) {
                                    skipThisGame = true;
                                } else if (title) {
                                    uniqueGameTitles.add(title);
                                }
                            }
                            
                            // Skip this game if it's a duplicate
                            if (skipThisGame) {
                                return;
                            }
                            
                            // Add to unique list
                            uniqueFilteredGames.push(game);
                            uniqueCount++;
                            
                            // 确保游戏卡片有正确的分类标签
                            gameElement.setAttribute('data-category', game.category || category);
                            
                            // 添加动画效果 - 使用递增延迟创建交错的出场效果
                            gameElement.classList.add('opacity-0', 'translate-y-8');
                            gameElement.style.transitionDelay = `${index * 50}ms`; // Reduced delay for faster appearance
                            
                            // Add to document fragment
                            fragment.appendChild(gameElement);
                        }
                    } catch (e) {
                        console.error('Error processing game element:', e);
                    }
                });
                
                // Add all processed elements to container at once
                finalGamesContainer.appendChild(fragment);
                
                // Trigger animations in a single batch
                setTimeout(() => {
                    const newElements = finalGamesContainer.querySelectorAll('.opacity-0');
                    newElements.forEach(el => {
                        el.classList.add('transition-all', 'duration-500', 'ease-out');
                        el.classList.remove('opacity-0', 'translate-y-8');
                    });
                }, 10);
                
            } catch (error) {
                console.error('Error adding games to container:', error);
            }
            
            // 计算实际显示的游戏数量（考虑已经显示的游戏）
            const totalDisplayed = isAppending 
                ? finalGamesContainer.querySelectorAll('.game-card').length 
                : uniqueCount;
            
            // 更新"查看更多"按钮的可见性和行为
            updateViewMoreButtonVisibility(filteredGames.length, totalDisplayed);
            
            // 如果当前页小于总页数，确保"查看更多"按钮可见
            if (totalDisplayed < totalGames) {
                viewMoreButton.style.display = 'inline-block';
                
                // 更新按钮文本和样式
                if (currentCategory !== 'all' && gamePageUrls[currentCategory]) {
                    // 特定分类页面按钮
                    viewMoreButton.textContent = `View More ${currentCategory.charAt(0).toUpperCase() + currentCategory.slice(1)} Games`;
                    viewMoreButton.className = `inline-block bg-${currentCategory} text-white px-8 py-3 rounded-full hover:bg-${currentCategory}/90 transition-colors duration-300 font-medium shadow-lg shadow-${currentCategory}/20`;
                    // 不设置data-url，这样点击后会继续加载更多游戏而不是跳转
                    viewMoreButton.removeAttribute('data-url');
                } else {
                    // 所有游戏按钮
                    const remainingGames = totalGames - totalDisplayed;
                    viewMoreButton.textContent = `View More Games (${totalDisplayed}/${totalGames})`;
                    viewMoreButton.className = 'inline-block bg-primary text-white px-8 py-3 rounded-full hover:bg-primary/90 transition-colors duration-300 font-medium shadow-lg shadow-primary/20';
                    viewMoreButton.removeAttribute('data-url');
                }
            } else {
                viewMoreButton.style.display = 'none';
                
                // 添加"所有游戏已显示"信息
                const allShownMessage = document.createElement('p');
                allShownMessage.className = 'text-light/50 text-center mt-4 all-shown-message';
                allShownMessage.textContent = `All ${totalGames} ${currentCategory === 'all' ? '' : currentCategory} games have been shown`;
                
                // 移除之前可能存在的"所有游戏已显示"消息
                const existingMessages = document.querySelectorAll('.all-shown-message');
                existingMessages.forEach(msg => msg.remove());
                
                // 将消息添加到viewMoreButton的父元素
                const viewMoreContainer = document.querySelector('.text-center.mt-12');
                if (viewMoreContainer) {
                    viewMoreContainer.appendChild(allShownMessage);
                }
            }
        }
    </script>
</body>
</html>